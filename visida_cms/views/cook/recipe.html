<script type="text/javascript" src="./node_modules/magnifier/event.js"></script>
<link rel="stylesheet" type="text/css" href="./node_modules/magnifier/magnifier.css">
<div id="content" ng-controller="recipeController" class="container">
	<div class="row content" ng-show="loading" style="height: 100%">
		<div class="col-xs-12" style="height: 80%">
			<span class="glyphicon glyphicon-refresh loading-run" style="font-size: 160px; position: absolute; left: 50%; top: 50%; margin: auto; margin-left: -80px"></span>
		</div>
	</div>
	<div class="row content" ng-show="!loading">
		<div class="page-head col-xs-12">
			<span class="form-inline" ng-show="!recipe.name || editName">Recipe: <input type="text" class="form-control" ng-model="recipe.name" ng-change="dirty = true"></span>
			
			<span ng-show="recipe.name && !editName">Recipe: {{ recipe.name }}
				<span class="glyphicon glyphicon-edit" style="color: #44dac9; padding-left: 10px;" title="Edit" ng-click="editName = true"></span>
			</span>
			<span class="pull-right">
				<span class="glyphicon glyphicon-eye-open glyph-md btn-glyph" role="button" title="Hide" ng-if="(getUser().isAdmin) && !recipe.hidden" ng-click="toggleHidden(true)"></span>
				<span class="glyphicon glyphicon-eye-close glyph-md btn-glyph" role="button" title="Show" style="color: #ababab" ng-if="getUser().isAdmin && recipe.hidden" ng-click="toggleHidden(false)"></span>
				<span class="glyphicon glyphicon-floppy-disk glyph-md btn-glyph" title="Already Saved" style="color: #ababab; margin-left: 20px" ng-show="!dirty"></span>
				<span class="glyphicon glyphicon-floppy-disk glyph-md btn-glyph" title="Save" role="button" style="margin-left: 20px; color: #295173" ng-show="dirty" ng-click="saveName()"></span>
			</span>
			<hr class="head-hr">
		</div>
		<div class="col-xs-12" style="margin-top: 20px;">
			<div class="col-xs-12 col-md-4">
				<ul class="list-group">
					<li class="list-group-item list-group-item-header">
						<div style="display: flex;">
							<div style="text-overflow: ellipsis; overflow: hidden; white-space: nowrap; width: 100%;">
								<span class="row-head">Household: <a href="#!/cook?&household={{ recipe.householdParticipantId }}">{{ recipe.householdParticipantId }}</a></span>
							</div>
							<div>
								<a class="glyphicon glyphicon-home glyph-md btn-glyph-w" target="_blank" href="{{'#!/household?recipe=' + recipe.id + '&household=' + recipe.householdParticipantId + '&study=' + recipe.studyId + '&date=' + recipe.captureTime.substring(0, 10) }}" style="color: #295173; margin-top: -5px;" title="Show in household view"></a>
							</div>
						</div>
					</li>
					<li class="list-group-item" style="padding: 0px 0px 1px 1px;">
						<div style="position: relative;">
							<img id="image" ng-src="{{ recipe.imageUrl != null ? recipe.imageUrl : 'images/noimage.png' }}" class="img" style="width: 100%;">
						</div>
					</li>
					<li class="list-group-item">
						<div style=""><!-- margin-top: 10px; -->
							<span><!-- Apply yield factor -  -->Choose the most similar recipe: </span>
							<select id="yield-factor-select" class="form-control" ng-model="yieldFactorSource" ng-change="changeYieldFactor()">
								<!-- ng-model="recipe.yieldFactor" -->
								<!-- <option value="0">Not Selected</option> -->
								<option value="{{yield.name}}" ng-repeat="yield in recipe.matchingFactors" ng-init="$last && initYieldFactor()">{{ yield.name }} <!-- - {{yield.factor}} --> {{cookMethodToString(yield.cookMethod)}}</option>
								<!-- <option value="-1">Add new yield factor</option> -->
							</select>
							<div class="" style="margin-top: 10px;">
								<div class="form-group row">
									<label class="col-sm-4">Yield factor: </label>
									<div class="col-sm-8">
										<input type="number" name="" class="form-control" ng-model="recipe.yieldFactor" ng-disabled="!recipe.isCustomYF" ng-change="makeDirty()">
									</div>
								</div>
								<div class="form-group row">
									<label class="col-sm-4">Density: </label>
									<div class="col-sm-8">
										<input type="number" name="" class="form-control" ng-model="recipe.foodComposition.density" ng-disabled="!recipe.isCustomYF" ng-change="makeDirty()">
									</div>
								</div>
								<div class="form-group row" ng-show="recipe.isCustomYF">
									<label class="col-sm-5">Use as source: </label>
									<div class="col-sm-7">
										<input type="checkbox" class="form-check" name="isSource" ng-model="recipe.isSource" ng-change="makeDirty()">
									</div>
								</div>
								<!-- <div class="form-group row">
									<label class="col-sm-4">Food Group: </label>
									<div class="col-sm-8">
										<select id="food-group-select" name="food-group-select" class="form-control" ng-model="recipe.foodGroup">
											<option value="11">Cereals and Products</option>
											<option value="12">Starchy roots, tubers and products</option>
											<option value="13">Legumes, nuts, seeds and products</option>
											<option value="14">Vegetables and products</option>
											<option value="15">Fruits and Products</option>
											<option value="16">Meat, other animals and products</option>
											<option value="17">Finfish, shellfish, other aquatic animals and products</option>
											<option value="18">Eggs products</option>
											<option value="19">Milk and products</option>
											<option value="20">Fats and oils</option>
											<option value="21">Sugar and sugar products</option>
											<option value="22">Spices and condiments</option>
											<option value="23">Beverages, alcoholic</option>
											<option value="24">Beverages, non-alcoholic</option>
											<option value="25">Fast foods: franchise foods</option>
											<option value="26">Packaged snack foods</option>
											<option value="27">Mixed food dishes: local</option>
											<option value="28">Miscellaneous</option>
										</select>
									</div>
								</div> -->
							</div>
						</div>
					</li>
				</ul>
			</div>

			<div class="col-xs-12 col-sm-8 text-left">
				<!--<a href="#!homography?id={{ recipe.id }}" ng-show="recipe.homography">View Homography</a>-->
				<div class="row panel panel-default">
					<div class="panel-heading">
						<span class="row-head">Recipe Description</span>
					</div>
					<div class="panel-body" ng-if="recipe.audioUrl || !recipe.textDescription">
						<audio controls src="{{ recipe.audioUrl }}" >
							Your browser does not support the audio element.
						</audio>
					</div>
					<div class="panel-body" ng-if="recipe.textDescription">
						<span>
							{{ recipe.textDescription }}
						</span>
					</div>
				</div>
				<div class="row panel panel-default" ng-show="recipe.usages.length > 0">
					<div class="panel-heading">
						<span class="row-head">Linked Eating Occasions</span>
					</div>
					<div class="panel-body row">
						<div class="col-xs-4 col-md-2" style="display: inline; padding:0px 10px; text-align: center;" ng-repeat="usage in recipe.usages">
							<a href="#!image?id={{usage.id}}&household={{recipe.householdParticipantId}}" style="text-align: center;">{{ usage.recordTime | date : 'hh:mm a  dd/MM' }}</a>
						</div>
					</div>
				</div>
				<div class="row">
					<ul class="list-group row" style="margin: 2px;">
						<li class="list-group-item" style="background-color: #f5f5f5"><span class="row-head">Ingredients - Select cooking method</span><a href="#!/records?recipe={{recipe.id}}" class="pull-right">Analyze all ingredients</a></li>
						<li class="list-group-item col-xs-6 col-sm-3" ng-repeat="ingr in recipe.ingredients" style="text-align: center;"  ng-if="!ingr.imageRecord.hidden || canAdmin">
							<a href="#!image?id={{ingr.imageRecord.id}}&recipe={{recipe.id}}">
								<div class="hoverimage">
									<img ng-src="{{ ingr.imageRecord.imageUrl }}" style="width: 100%;" />
									<span ng-if="!ingr.imageRecord.imageUrl && ingr.imageRecord.imageName">Image not Uploaded</span>
									<span ng-if="!ingr.imageRecord.imageName" style="width: 100%; height: 193px; display: block;">Imageless Record</span>
									<div class="hhview-hidden" ng-if="ingr.imageRecord.hidden"><img src="images/hiddenw.png" /></div>
								<p class="hoverimagetext">{{getToolTip(ingr, $index)}}</p>
								</div>
							</a>
							<select class="form-control" style="margin-top: 10px;" ng-model="ingr.cookSelect" ng-change="updateYield(ingr)"><!--  ng-disabled="ingr.imageRecord.foodItems.length === 0"  -->
								<option value="0">Uncooked</option>
								<option value="1" ng-if="true || ingr.yieldWater">Boil/Poach/Steam</option>
								<option value="2" ng-if="true || ingr.yieldStoveTop">Grill</option>
								<option value="4" ng-if="true || ingr.yieldStoveTop">Fry</option>
								<option value="3" ng-if="true || ingr.yieldOven">Bake</option>
							</select>
						</li>
					</ul>
				</div>
			</div>
			<!-- table -->
			<div class="col-xs-12" style="margin-left: 15px;">
				<div class="row panel panel-default">
					<div class="panel-heading">
						<span class="row-head">Recipe nutrient analysis</span>
					</div>
					<div class="panel-body">
						<div class="" style="margin: 20px 0px 20px 0px; overflow-x: scroll; background-color: white; padding: 0;">
							<table class="recipe-table">
								<tr>
									<th></th>
									<th style="min-width: 140px;"></th>
									<th>Quantity (g)</th>
									<th ng-repeat="col in fctConfig" ng-if="col.valid">{{ col.external }}</th>
								</tr>
								<tbody ng-repeat="ingredient in recipe.ingredients" ng-if="!ingredient.imageRecord.hidden || canAdmin">
									<tr class="header"> <!-- ng-if="ingredient.imageRecord.foodItems.length > 0" -->
										<td>
											<a ng-if="ingredient.error && ingredient.errorId" href="#!image?id={{ ingredient.errorId }}" ><span title="{{ ingredient.error }}" class="glyphicon glyphicon-warning-sign text-danger"></span></a>
											<span ng-if="ingredient.error && !ingredient.errorId" title="{{ ingredient.error }}" class="glyphicon glyphicon-warning-sign text-danger"></span>
										</td>
										<td>Image {{ ingredient.displayIndex }} <span class="glyphicon glyphicon-eye-close pull-right" title="Hidden" style="color: #ababab" ng-if="ingredient.imageRecord.hidden"></span></td>
										<td>{{ ingredient.nutrientTotal.quantityGrams | number:1}}</td>
										<td ng-repeat="col in fctConfig" ng-if="col.valid">{{ ingredient.nutrientTotal[col.internal] | number:1 }}</td>
									</tr>
									<tr ng-repeat="item in ingredient.imageRecord.foodItems">
										<td>
											<a ng-if="item.error && item.errorId" href="#!image?id={{ item.errorId }}" ><span title="{{ item.error }}" class="glyphicon glyphicon-warning-sign text-danger"></span></a>
											<span ng-if="item.error && !item.errorId" title="{{ item.error }}" class="glyphicon glyphicon-warning-sign text-danger"></span>
										</td>
										<td style="font-weight: normal; padding-left: 25px;">
											{{ item.foodCompositionDatabaseEntry.name }}
											<span class="glyphicon glyphicon-eye-close pull-right" title="Hidden" style="color: #ababab" ng-if="ingredient.imageRecord.hidden"></span>
										</td>
										<td>{{ item.quantityGrams | number:1 }}</td>
										<td ng-repeat="col in fctConfig" ng-if="col.valid">{{ item.nutrientTotal[col.internal] | number:1 }}</td>
									</tr>
								</tbody>
								<tr class="header">
									<td></td>
									<td>Total Raw</td>
									<td>{{ comparison.quantityGrams | number:1}}</td>
									<td ng-repeat="col in fctConfig" ng-if="col.valid">{{ comparison[col.internal] | number:1 }}</td>
								</tr>
								<tr class="header">
									<td></td>
									<td>Total Cooked</td>
									<td>{{ 100 * recipe.cookedModifier | number:1 }}</td>
									<td ng-repeat="col in fctConfig" ng-if="col.valid">{{ recipe.foodComposition[col.internal] * recipe.cookedModifier | number:1 }}</td>
								</tr>
								<tr class="header">
									<td></td>
									<td>Total Cooked (per 100g)</td>
									<td>100</td>
									<td ng-repeat="col in fctConfig" ng-if="col.valid">{{ recipe.foodComposition[col.internal] | number:1 }}</td>
								</tr>
							</table>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-4">
					<ul class="list-group data-list" style="">
						<li class="list-group-item list-group-item-header">
							<span class="h3 row-head">Metadata</span>
						</li>
						<li class="list-group-item">
							<span style="padding-right: 10px;" role="button" title="Edit" ng-click="startEditTime()" ng-if="canAdmin"><strong>Time: </strong>{{recipe.captureTime | date : 'h:mma dd/MM/yyyy' }}
								<span class="glyphicon glyphicon-edit" style="color: #44dac9;" ></span>
							</span>
							<span style="padding-right: 10px;" ng-if="!canAdmin"><strong>Time: </strong>{{recipe.captureTime | date : 'h:mma dd/MM/yyyy' }}</span>
							<!-- 
							<span style="padding-right: 10px;"><strong>Capture Time: </strong></span>
							<span style="">{{ recipe.captureTime | date : 'hh:mma dd/MM/yyyy' }}</span>
							<span class="glyphicon glyphicon-edit" style="color: #44dac9;" ></span> -->
						</li>
						<li class="list-group-item">
							<span style="padding-right: 10px;"><strong>Image Name: </strong></span>
							<span style="">{{ recipe.imageName }}</span>
						</li>
						<li class="list-group-item">
							<span style="padding-right: 10px;"><strong>Audio Name: </strong></span>
							<span style="">{{ recipe.audioName }}</span>
						</li>
						<li class="list-group-item" ng-show="recipe.yieldFactor">
							<span style="padding-right: 10px;"><strong>Yield Factor: </strong></span>
							<span style="">{{ recipe.yieldFactor }}</span>
						</li>
					</ul>
				</div>
				<div class="col-xs-8">
					<ul class="list-group data-list" style="margin-bottom: 10px;">
						<li class="list-group-item list-group-item-header">
							<span class="h3 row-head">Comments</span>
							<span class="glyphicon glyphicon-plus pull-right glyph-add btn-glyph" style="font-size: 18px; margin-top: -2px;" role="button" ng-click="addComment()" title="Add Comment"></span>
						</li>
						<li class="list-group-item" style="padding-bottom: 0; padding: 0;">
							<div style="padding-bottom: 0;">
								<div ng-show="newComment">
									<form ng-submit="addComment(newComment)">
										<textarea id="commentInput" rows="3" class="form-control comment-entry" ng-model="newComment.text" placeholder="Add comment:" style="width: 98%"  ng-change="commentTextChanged(newComment, '{{newComment.text}}')" />
										<div class="commentControls" style="margin: 6px;">
											<button class="btn btn-sm">Send<span class="glyphicon glyphicon-send" style="padding-left: 3px;" /></button>
											<button type="button" class="btn btn-sm close-button" ng-click="cancelNewComment()" ng-if="recipe.comments && recipe.comments.length > 0">Close</button>
											<span class="comment-toggle pull-right">
												<span>High priority: </span>
												<span class="glyphicon glyphicon-warning-sign btn-glyph" ng-class="newComment.highPriority ? 'text-danger' : 'btn-disabled'" role="button" ng-click="toggleCommentFlag(newComment)" style="font-weight: lighter;" title="Set as high priority"></span>
											</span>
											<span class="comment-toggle pull-right" style="padding-right: 20px;">
												<span>Set as task: </span>
												<span class="glyphicon glyphicon-edit btn-glyph" ng-class="newComment.isTask ? 'check-active' : 'btn-disabled'" role="button" ng-click="toggleTaskFlag(newComment)" style="font-weight: lighter; " title="Set as a task"></span>
											</span>
											<span class="comment-toggle pull-right" style="padding-right: 20px;">
												<span class="btn-glyph" role="button" ng-click="toggleCommentMention(newComment)" style="font-weight: bold; color: #295173;" title="Tag a user">@</span>
											</span>
											<input id="mention-entry" name="mention" list="users" class="pull-right" ng-show="newComment.isMentioning" ng-model="newComment.mentionAutoFill" ng-change="commentMentionUpdated(newComment, newComment.mentionAutoFill)">
											<datalist id="users">
												<option ng-repeat="u in configUsers" value="{{u.userName}}"></option>
											</datalist>
										</div>
									</form>
								</div>
								<div class="" ng-repeat="comment in recipe.comments" ng-show="commentIndex == $index && !newComment" my-post-repeat-directive style="padding: 5px;">
									<div class="comment-box top">
										<p id="comment-text-{{$index}}" class="">
											<span class="glyphicon glyphicon-warning-sign text-danger" ng-if="comment.flag === 'Warning'" style="font-weight: lighter;"> </span> 

											<span class="bolder">{{ comment.authorName }}: </span>
											<span>{{ comment.text }}</span>

											<!-- This all gets replaced in the directive anyway -->
										</p>
									 	<span class="glyphicon glyphicon-eye-open btn-glyph comment-hide" role="button" title="Hide" ng-if="canAdmin && !comment.hidden" ng-click="deleteComment(comment)"></span>
										<span class="glyphicon glyphicon-eye-close btn-glyph comment-hide" role="button" title="Show" style="color: #ababab" ng-if="canAdmin && comment.hidden" ng-click="deleteComment(comment)"></span>

										<input type="checkbox" class="" ng-model="comment.isTaskCompleted" ng-change="commentToggleTaskComplete(comment)" ng-if="comment.flag === 'Task'">
									</div>
									<div class="comment-box reply" ng-repeat="reply in comment.replies">
										<p id="comment-reply-{{$parent.$index}}-{{$index}}" class="">
											<span class="bolder">{{ reply.authorName }}: </span>
											<span ng-class="styleComment(comment)">{{ reply.text }}</span>
											<span class="glyphicon glyphicon-eye-open pull-right btn-glyph" role="button" title="Hide" ng-if="canAdmin && !reply.hidden" ng-click="deleteComment(reply)"></span>
											<span class="glyphicon glyphicon-eye-close pull-right btn-glyph" role="button" title="Show" style="color: #ababab" ng-if="canAdmin && reply.hidden" ng-click="deleteComment(reply)"></span>
											<!-- <span class="text-danger glyphicon glyphicon-plus btn-glyph pull-right" role="button" style="color: #517329;" ng-click="deleteComment(reply)" ng-if="canAdmin && reply.hidden" title="Undelete"/>
											<span class="glyphicon glyphicon-remove btn-glyph pull-right" role="button" style="color: #a94442;" ng-click="deleteComment(reply)" ng-if="canAdmin && !reply.hidden" title="Delete"/> -->
										</p>
									</div>
									<form ng-submit="addCommentReply(comment, comment.replyText)" style="margin-left: 30px;">
										<textarea rows="2" class="form-control comment-entry" ng-model="comment.replyText" placeholder="Reply:" style="width: 98%" />
										<div class="commentControls" style="margin: 6px;">
											<button class="btn btn-sm">Reply<span class="glyphicon glyphicon-share-alt" style="padding-left: 3px;" /></button>
										</div>
									</form>
								</div>
								<!-- <div class="" ng-repeat="comment in recipe.comments" ng-show="commentIndex == $index && !newComment" style="padding: 5px;">
									<div class="comment-box top">
										<p id="comment-text-{{$index}}" class="">
											<span class="glyphicon glyphicon-warning-sign text-danger" ng-if="comment.flag === 'Warning'" style="font-weight: lighter;"> </span> 
											<span class="bolder">{{ comment.authorName }}: </span>
											<span style="{{comment.hidden ? 'text-decoration: line-through;' : ''}}">{{ comment.text }}</span>

											<span class="glyphicon glyphicon-eye-open btn-glyph pull-right" role="button" title="Hide" ng-if="canAdmin && !comment.hidden" ng-click="deleteComment(comment)"></span>
											<span class="glyphicon glyphicon-eye-close btn-glyph pull-right" role="button" title="Show" style="color: #ababab" ng-if="canAdmin && comment.hidden" ng-click="deleteComment(comment)"></span>

											<input type="checkbox" class="" ng-model="comment.isTaskCompleted" ng-change="commentToggleTaskComplete(comment)" ng-if="comment.flag === 'Task'">
										</p>
									</div>
									<div class="comment-box reply" ng-repeat="reply in comment.replies">
										<p id="comment-text-{{$index}}" class="">
											<span class="bolder">{{ reply.authorName }}: </span>
											<span style="{{reply.hidden ? 'text-decoration: line-through;' : ''}}">{{ reply.text }}</span>
											<span class="glyphicon glyphicon-eye-open btn-glyph pull-right" role="button" title="Hide" ng-if="canAdmin && !reply.hidden" ng-click="deleteComment(reply)"></span>
											<span class="glyphicon glyphicon-eye-close btn-glyph pull-right" role="button" title="Show" style="color: #ababab" ng-if="canAdmin && reply.hidden" ng-click="deleteComment(reply)"></span>
										</p>
									</div>
									<form ng-submit="addCommentReply(comment, comment.replyText)" style="margin-left: 30px;">
										<textarea rows="2" class="form-control comment-entry" ng-model="comment.replyText" placeholder="Reply:" style="width: 98%" />
										<div class="commentControls" style="margin: 6px;">
											<button class="btn btn-sm">Reply<span class="glyphicon glyphicon-share-alt" style="padding-left: 3px;" /></button>
										</div>
									</form>
								</div> -->
								<div class="commentNav" ng-show="!newComment && recipe.comments.length > 1" >
									<span class="glyphicon glyphicon-arrow-left" role="button" ng-click="changeComment(commentIndex-1)" ng-show="(commentIndex-1) >= 0"></span>
									<span class="glyphicon glyphicon-arrow-left" ng-show="(commentIndex-1) < 0" style="color: #ababab"></span>
									<span ng-repeat="comment in recipe.comments" role="button" ng-click="changeComment($index)" ng-class="commentIndex == $index ? 'bolder' : ''">{{ $index + 1 }}</span>
									<span class="glyphicon glyphicon-arrow-right" role="button" ng-click="changeComment(commentIndex+1)" ng-show="(commentIndex+1) < recipe.comments.length"></span>
									<span class="glyphicon glyphicon-arrow-right" ng-show="(commentIndex+1) >= recipe.comments.length" style="color: #ababab"></span>
								</div>
							</div>
						</li>
					</ul>
					<!-- <ul class="list-group data-list" style="margin-bottom: 10px;">
						<li class="list-group-item list-group-item-header">
							<span class="h3 row-head">Comments</span><br/>
						</li>
						<li class="list-group-item" ng-show="recipe.comments.length > 0" style="padding-bottom: 0;">
							<div class="" ng-repeat="comment in recipe.comments" ng-show="commentIndex == $index">
								<div>
									<span class="bolder">{{ comment.authorName }}: </span>
								</div>
								<p id="comment-text-{{$index}}">
									<span class="glyphicon glyphicon-warning-sign text-danger" ng-if="comment.flag === 'Warning'" style="font-weight: lighter;"> </span> {{ comment.text }}
								</p>
							</div>
							<div class="commentNav" ng-show="recipe.comments.length > 1">
								<span class="glyphicon glyphicon-arrow-left" role="button" ng-click="changeComment(commentIndex-1)" ng-show="(commentIndex-1) >= 0"></span>
								<span class="glyphicon glyphicon-arrow-left" ng-show="(commentIndex-1) < 0" style="color: #ababab"></span>
								<span ng-repeat="comment in recipe.comments" role="button" ng-click="changeComment($index)" ng-class="commentIndex == $index ? 'bolder' : ''">{{ $index }}</span>
								<span class="glyphicon glyphicon-arrow-right" role="button" ng-click="changeComment(commentIndex+1)" ng-show="(commentIndex+1) < recipe.comments.length"></span>
								<span class="glyphicon glyphicon-arrow-right" ng-show="(commentIndex+1) >= recipe.comments.length" style="color: #ababab"></span>
							</div>
						</li>
						<li class="list-group-item">
							<table style="width: 100%;">
								<tr>
									<td>
										<div>
											<textarea id="commentInput" rows="3" class="form-control" ng-model="newCommentText" placeholder="Add comment:" style="resize: vertical;" />
										</div>
									</td>
									<td style="width: 30px">
										<div style="text-align: center;">
											<span class="glyphicon glyphicon-warning-sign glyph-md btn-glyph" ng-class="newCommentFlag ? 'text-danger' : 'btn-disabled'" role="button" 
												ng-click="newCommentFlag = !newCommentFlag" style="padding-bottom: 5px; font-weight: lighter;"></span><br/><br/>
											<span class="glyphicon glyphicon-send glyph-md btn-glyph" role="button" ng-click="addComment(newCommentText, newCommentFlag)" style="padding-bottom: 5px; color: #2b608e"></span>
										</div>
									</td>
								</tr>
							</table>
						</li>
					</ul> -->
				</div>
			</div>
			<div class="row">
				<div class="" style="margin-top: 10px; margin-bottom: 10px;">
					<a class="btn btn-primary col-sm-1 col-sm-offset-1" ng-disabled="pageData.PrevId === 0" href="{{ buildLink(pageData.PrevId) }}" ng-click="movePage($event)">Previous</a>
					<a class="btn btn-primary col-sm-1 col-sm-offset-8" ng-disabled="pageData.NextId === 0" href="{{ buildLink(pageData.NextId)	}}" ng-click="movePage($event)">Next</a>
				</div>
			</div>
		</div>
	</div>
	<div style="position: fixed; left: 0; right: 0; padding: 0; top: 0; bottom: 0; margin: 0; display: flex; background-color: #000000aa;" class="h-100 row align-items-center" ng-show="displayEditTime" ng-click="displayEditTime = false;">
		<div class="floating-form" style="position: relative;" ng-click="$event.stopPropagation();">
			<form ng-submit="saveEditTime(editTimeTime, editTimeDate)">
				<ul class="list-group" style="margin-bottom: 0px;">
					<li class="list-group-item list-group-item-header">Edit Time</li>
					<li class="list-group-item">
						<span class="bold">Time:</span>
						<input type="time" name="editTimeTime" class="form-control" ng-model="editTimeTime">
					</li>
					<li class="list-group-item">
						<span class="bold">Date:</span>
						<input type="date" name="editTimeTime" class="form-control" ng-model="editTimeDate">
					</li>
					<li class="list-group-item">
						<input type="submit" name="editTimeTime" class="btn btn-primary" value="Save" ng-model="editTimeDate">
					</li>
				</ul>
			</form>
		</div>
	</div>
	<div class="magnifier-preview" id="preview" style="width: 600px; height: 800px; position: fixed; top: 10%; left: 45%; pointer-events: none; overflow: hidden;"></div>
</div>